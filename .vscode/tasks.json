{
    "inputs": [
        {
            "id": "questionNum",
            "type": "promptString",
            "description": "The question number 'x-x'"
        },
        {
            "id": "makeTarget",
            "type": "promptString",
            "description": "The Makefile target"
        }
    ],

    "tasks": [
        // general C++ build active file
        {
            "type": "process",
            "label": "C/C++: clang++ build active file",
            "command": "/usr/bin/clang++",
            "args": [
                "-g",
                "-std=c++11",
                "${file}",
                "-o",
                "${fileDirname}/${fileBasenameNoExtension}"
            ],
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "problemMatcher": [
                "$gcc"
            ],
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "detail": "Task generated by Debugger."
        },
        { // general c++ delete debug files
            "type": "shell",
            "label": "clean general debug files",
            "command": "rm -r ${fileDirname}/${fileBasenameNoExtension}.dSYM",
            "dependsOn":[
                "rmProgramBinaryGeneral"
            ]
        },
        {
            "label": "rmProgramBinaryGeneral",
            "command": "rm",
            "args": [
                "${fileDirname}/${fileBasenameNoExtension}"
            ],
            "type": "shell"
        },

        // debugging c++ files for uni with main-x-x.cpp and function-x-x.cpp
        {
            "type": "process",
            "label": "Build main and function file",
            "command": "/usr/bin/g++",
            "args": [
                "-g",
                "-std=c++11",
                "${fileDirname}/main-${input:questionNum}.cpp",
                "${fileDirname}/function-${input:questionNum}.cpp",
                "-o",
                "${fileDirname}/testProgram"
            ],
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "problemMatcher": [
                "$gcc"
            ],
            "detail": "Build main-x-x.cpp and function-x-x.cpp from cwd."
        },

        // delete the testProgram files
        {
            "type": "shell",
            "label": "clean debug files",
            "command": "rm -r ${fileDirname}/testProgram.dSYM",
            "dependsOn":[
                "rmProgramBinary"
            ]
        },
        {
            "label": "rmProgramBinary",
            "command": "rm",
            "args": [
                "${fileDirname}/testProgram",
            ],
            "type": "shell"
        },

        // run Makefile
        {
            "type": "process",
            "label": "Build makefile",
            "command": "make",
            "args": [
                "${input:makeTarget}",
                "-C",
                "${fileDirname}"
            ], 
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "problemMatcher": [],
            "detail": "Run 'make [target]' in the current directory."
        },

        // clean Makefile
        {
            "type": "shell",
            "label": "Clean makefile",
            "command": "make",
            "args": [
                "clean",
                "-C",
                "${fileDirname}"
            ], 
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "problemMatcher": [],
            "detail": "Run 'make clean' in the current directory."
        },

    ],
    "version": "2.0.0"
}